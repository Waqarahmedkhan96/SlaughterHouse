RabbitMQ Testing Guide
1: Start Spring Boot Application
2: Stop Postgres from window-services
3: Start RabbitMq  either through Application from window or through rabbitmq command prompt.
4: Enable RabbitMQ-Management Plug in with this command in  rabbitmq command prompt terminal.
   "rabbitmq-plugins.bat enable rabbitmq_management"
5: Open RabbitMQ server http://localhost:15672
6: Enter username(guest) and password(quest)
7: Open Postman and post animal or tray etc., and then you'd be able to see that the request is in queue on you rabbitmq server.
8: Start your postgres again, and you will see that data is stored in DB

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

RabbitMQ Testing Guide -> (Postgres Down â†’ Queue â†’ Back Up)

   One-time setup (only first time on this PC)
Step:1 - Start RabbitMQ Management Plugin**
   â†’ Open â†’ Start Menu â†’ RabbitMQ Command Prompt (sbin)*
   â†’ Type this and press Enter:
     "rabbitmq-plugins.bat enable rabbitmq_management"
   â†’ This turns on the "Web UI" for RabbitMQ.

Step 2 Start RabbitMQ server**
   â†’ From Start Menu â†’ start **RabbitMQ Service**
   â†’ Or open **RabbitMQ Command Prompt (sbin)**
   â†’ Open browser â†’ go to: `http://localhost:15672`
   â†’ Login:
     â†’ **Username:** `guest`
     â†’ **Password:** `guest`
   â†’ Click on the â€œQueuesâ€ to see the queues.


Step 3 â€“ Start Spring Boot App
   4 Run your main class: `SlaughterHouseApplication`


Step 5 - Open Windows Services
   â†’ Press `Win + R` â†’ type `services.msc` â†’ press Enter
   â†’ In the list, scroll and find something like:
     â†’ `postgresql-x64-15` or similar (your version)
   â†’ Right-click it â†’ click **Stop**.
   â†’ Now your **database is OFF** (Spring Boot cannot save to DB).



Step 6 - Send POST request from Postman(Animal / Tray)

   â†’ Open **Postman**
   â†’ Example: `POST http://localhost:9090/animals`
   â†’ Send a valid JSON body (like your animal DTO).

   What happens now:
   â†’ Station 1:
     *â†’Tries to save to DB â†’ fails because Postgres is down
     * â†’Still **publishes event** to RabbitMQ (AnimalRegisteredEvent).
   â†’ RabbitMQ:
     * Puts this message in **your queue** (e.g. `animal-registered-queue`).

Step 7 - **Check queue in RabbitMQ UI**
   â†’ Go to **Queues** in `http://localhost:15672`
   â†’ Open your queue (e.g. `animal-registered-queue`)
   â†’ You should see **1 or more messages** in **Ready** state.

 Step 8 â€“ Start PostgreSQL service

   â†’ Go back to **Services** window
   â†’ Right-click your Postgres service â†’ **Start**.
   â†’ Now the **database is back online**.

Step 9 - Watch the magic ğŸª„

   â†’ Your **listener** (RabbitMQ @RabbitListener in Spring Boot) keeps trying to process messages.
   â†’ When DB is back:

     â†’ It processes the queued message
     â†’ Saves data into DB
     â†’ Acknowledges the message â†’ message disappears from queue.

Step 10 - **Verify in DB**

     â†’ Open pgAdmin or your DB tool
     â†’ Check the **Animal** table (or Tray, etc.)
     â†’ You will see the new row inserted **after** you restarted Postgres.








â†’ Short Explanation of the â€œMagicâ€

* **Station 1** doesnâ€™t talk directly to **Station 2** or DB.
* It just **drops a message into RabbitMQ** (like a mailbox).
* If DB (or Station 2) is down:

  * The message **stays in the queue** (safe, not lost).
* When DB is back:

  * The listener **retries**
  * Processes all waiting messages
  * Saves them to DB.




